

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Architecture of the library &mdash; libdynamixel 2.1 documentation</title>
  

  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  

  
    <link rel="top" title="libdynamixel 2.1 documentation" href="../index.html"/>
        <link rel="up" title="Reference" href="index.html"/>
        <link rel="prev" title="Reference" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
          

          
            <a href="http://www.resibots.eu">
          

          
            
            <img src="../_static/resibots_logo_black_200px.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.1
              </div>
            
          

          
<div role="search">
  <form id="resibots-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
                  <a class="caption" href="http://www.resibots.eu">Project's website</a>
              
                  <a class="caption" href="http://www.resibots.eu/limbo/">Limbo (BO library)</a>
              
            

            
            
                <p class="caption"><span class="caption-text">Libdynamixel</span></p>
<ul class="simple">
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Libdynamixel&#8217;s documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../high_level_api.html">High level API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../low_level_api.html">Low level API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Architecture of the library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-two-protocols">The two protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="#serial-interface">Serial interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instructions-and-status-report">Instructions and status report</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-traits">Model traits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#baseservo-servo-and-actuator-classes">BaseServo, Servo and actuator classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#protocol-specific-packets">Protocol-specific packets</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            

            
            
              
                <a class="caption" href="http://github.com/resibots/libdynamixel">github</a>
              
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">libdynamixel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">libdynamixel</a> &raquo;</li>
    
      <li><a href="index.html">Reference</a> &raquo;</li>
    
    <li>Architecture of the library</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/reference/architecture.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="architecture-of-the-library">
<h1>Architecture of the library<a class="headerlink" href="#architecture-of-the-library" title="Permalink to this headline">¶</a></h1>
<p>In this document we will describe how the library communicates with dynamixel actuators.</p>
<div class="section" id="the-two-protocols">
<h2>The two protocols<a class="headerlink" href="#the-two-protocols" title="Permalink to this headline">¶</a></h2>
<p>The client interacts with Dynamixels by sending instructions and receiving status reports, both in forms of packets. Robotis has two versions of its communication protocol defining diferent packet formats and contents. We have a class for each protocol containing:</p>
<ul class="simple">
<li>type definitions for protocol-specific data</li>
<li>the instructions allowed in the protocol</li>
<li>methods to build a packet from data (<cite>pack_data</cite>) and extract data from incoming packet (<cite>unpack_data</cite>)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unless said overwise, everything written bellow is common to versions 1 and 2 of the communication protocols.</p>
</div>
</div>
<div class="section" id="serial-interface">
<h2>Serial interface<a class="headerlink" href="#serial-interface" title="Permalink to this headline">¶</a></h2>
<p>All communication with the dynamixel has to go through a serial interface. We support both <a class="reference external" href="http://www.xevelabs.com/doku.php?id=product:usb2ax:usb2ax">USB2AX</a> and <a class="reference external" href="http://www.robotis-shop-en.com/?act=shop_en.goods_view&amp;GS=1289&amp;keyword=USB2Dynamixel">USB2DYNAMIXEL</a> in the class <code class="xref cpp cpp-class docutils literal"><span class="pre">controllers::Usb2Dynamixel</span></code>. Other serial interfaces should also work.</p>
</div>
<div class="section" id="instructions-and-status-report">
<h2>Instructions and status report<a class="headerlink" href="#instructions-and-status-report" title="Permalink to this headline">¶</a></h2>
<p>Instructions are packets sent to the actuators and status reports are the replies that the user may get (not for every instruction). There are different instruction kinds and a class is defined for each instruction.</p>
<p>Supported instructions:</p>
<ul class="simple">
<li><code class="xref cpp cpp-class docutils literal"><span class="pre">Ping&lt;class</span> <span class="pre">Protocol&gt;</span></code>: check availability of an actuator with given ID</li>
<li><code class="xref cpp cpp-class docutils literal"><span class="pre">Read&lt;class</span> <span class="pre">Protocol&gt;</span></code>: read some data in the RAM or ROM of an actuator</li>
<li><code class="xref cpp cpp-class docutils literal"><span class="pre">Write&lt;class</span> <span class="pre">Protocol&gt;</span></code>: write some data in the RAM or ROM of an actuator</li>
<li><code class="xref cpp cpp-class docutils literal"><span class="pre">RegWrite&lt;class</span> <span class="pre">Protocol&gt;</span></code>: register a write instruction to be performed later (on receival of the <em>action</em> instruction)</li>
<li><code class="xref cpp cpp-class docutils literal"><span class="pre">Action&lt;class</span> <span class="pre">Protocol&gt;</span></code>: trigger the registered write instruction</li>
<li><code class="xref cpp cpp-class docutils literal"><span class="pre">FactoryReset&lt;class</span> <span class="pre">Protocol&gt;</span></code>: reset the ROM of the actuator to factory defaults</li>
<li><code class="xref cpp cpp-class docutils literal"><span class="pre">SyncWrite&lt;class</span> <span class="pre">Protocol&gt;</span></code>: simultaneously write data for several servos (one memory address, many servos, many data)</li>
<li><code class="xref cpp cpp-class docutils literal"><span class="pre">Reboot&lt;class</span> <span class="pre">Protocol&gt;</span></code> (only for protocol 2)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following instructions, specific to protocol 2, are not implemented yet:</p>
<ul class="last simple">
<li>Sync read: same as <em>sync write</em> but for reading</li>
<li>Bulk write: simultaneously write data for several (many addresses, many servos, many data)</li>
<li>Bulk read: same as <em>bulk write</em> but for reading</li>
</ul>
</div>
<p>Likewise, the <a class="reference internal" href="../low_level_api.html#_CPPv2N9dynamixel12StatusPacketE" title="dynamixel::StatusPacket"><code class="xref cpp cpp-class docutils literal"><span class="pre">StatusPacket&lt;class</span> <span class="pre">Protocol&gt;</span></code></a> class is for the status report packet. A status packet can report errors in the communication or related to an actuator. It could be for instance a checksum error or an overheating error. Such packets are sent in response to any packet, unless it was sent to the broadcast ID. Some actuators also allow to configure which instructions trigger a status report.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more details on how instructions and status packet work, refer to <a class="reference external" href="http://support.robotis.com/en/">Robotis&#8217; documentation</a> then go to <span class="menuselection">Product Information ‣ Actuator ‣ Communication 1.0/2.0</span>.</p>
</div>
</div>
<div class="section" id="model-traits">
<h2>Model traits<a class="headerlink" href="#model-traits" title="Permalink to this headline">¶</a></h2>
<p>For a more easy to use client interface, the information specific to each actuator model (including the control table) is stored in the library. We use the trait class <code class="xref cpp cpp-class docutils literal"><span class="pre">ModelTraits&lt;class</span> <span class="pre">Model&gt;</span></code>, templated by the servo. This makes a unified yet extensible interface to all actuators.</p>
<p>Along the control table, the <code class="code docutils literal"><span class="pre">ModelTraits</span></code> class also defines the protocol version used by each servo.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">give a link to the list of supported actuators</p>
</div>
</div>
<div class="section" id="baseservo-servo-and-actuator-classes">
<h2>BaseServo, Servo and actuator classes<a class="headerlink" href="#baseservo-servo-and-actuator-classes" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../high_level_api.html#_CPPv2N9dynamixel6servos9BaseServoE" title="dynamixel::servos::BaseServo"><code class="xref cpp cpp-class docutils literal"><span class="pre">BaseServo&lt;class</span> <span class="pre">Protocol&gt;</span></code></a> abstract class declares all possible methods to interact with an actuator. They all throw a &#8220;not implemented&#8221; exception. Then, <code class="xref cpp cpp-class docutils literal"><span class="pre">Servo</span></code> inherits of <a class="reference internal" href="../high_level_api.html#_CPPv2N9dynamixel6servos9BaseServoE" title="dynamixel::servos::BaseServo"><code class="xref cpp cpp-class docutils literal"><span class="pre">BaseServo</span></code></a> and defines the methods to access the fields common to all actuators. The remainder fields are defined in the actuator secific classes. For instance, the MX 28 actuators have the class <code class="code docutils literal"><span class="pre">Mx28</span></code>. One such class is defined for every servo model.</p>
</div>
<div class="section" id="protocol-specific-packets">
<h2>Protocol-specific packets<a class="headerlink" href="#protocol-specific-packets" title="Permalink to this headline">¶</a></h2>
<p>Some operations are common to all actuators that use a given protocol. The templated class <code class="xref cpp cpp-class docutils literal"><span class="pre">ProtocolSpecificPackets&lt;class</span> <span class="pre">Model,</span> <span class="pre">class</span> <span class="pre">Protocol&gt;</span></code> is for these operations:</p>
<ul class="simple">
<li>convert the speed from unit-less integer to radians per second</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="Reference" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="wy-footer">
    <div role="contentinfo">
      <p>
          &copy; Copyright 2015, Jean-Baptiste Mouret, Federico Allocati, Antoine Cully, Dorian Goepp.

      
      
        <br/>
        <a href="mailto:jean-baptiste.mouret@inria.fr"> Contact us </a>
      
      </p>
    </div>
    <div class="wy-footer-aside">
      Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> modified for <a href="http://resibots.eu">Resibots</a>.
    </div>
    <div style="clear: both;"></div>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxResibotsTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>